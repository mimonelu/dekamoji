<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="creator" content="mimonelu">
    <meta name="publisher" content="mimonelu">
    <meta name="description" content="デカ文字">
    <meta name="robots" content="all">
    <meta property="og:title" content="デカ文字">
    <meta property="og:type" content="デカ文字">
    <meta property="og:url" content="https://mimonelu.github.io/dekamoji/?t=デカ文字&b=black&f=white">
    <meta property="og:image" content="https://mimonelu.github.io/dekamoji/dekamoji.png">
    <meta property="og:site_name" content="デカ文字">
    <meta property="og:description" content="デカ文字">
    <title>デカ文字</title>
    <style>
*, * > * {
  margin: 0;
  padding: 0;
}
body {
  background-color: #000000;
  color: #ffffff;
  overflow: hidden;
}
#canvas {
  margin: auto;
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  max-width: 100vw;
  max-height: 100vh;
}
    </style>
  </head>
  <body>
    <a id="link" href="javascript: void 0;" download="デカ文字">
      <canvas id="canvas" download="abc.png"></canvas>
    </a>
    <script>
const appName = 'デカ文字'
const main = () => {
  const params = new URLSearchParams(document.location.search.substring(1))
  const text = params.get('t') || appName
  const bgColor = params.get('b') || '#000000'
  const fgColor = params.get('f') || '#ffffff'
  const image = renderImage(text, bgColor, fgColor)
  updateLink(text, image)
  updateOgp(text, image)
}
const renderImage = (text, bgColor, fgColor) => {
  const canvas = document.querySelector('#canvas')
  const context = canvas.getContext('2d')
  canvas.width = 1200
  canvas.height = 630
  context.fillStyle = bgColor
  context.fillRect(0, 0, canvas.width, canvas.height)
  const fontWidth = Math.max(canvas.width, canvas.height) / (text.length + 2)
  context.font = `bold ${fontWidth}px serif`
  context.textAlign = 'center'
  context.textBaseline = 'middle'
  context.fillStyle = fgColor
  context.fillText(text, canvas.width / 2, canvas.height / 2, canvas.width)
  return canvas.toDataURL('image/png', 1.0)
}
const updateLink = (text, image) => {
  const link = document.querySelector('#link')
  link.setAttribute('download', text)
  link.setAttribute('href', image)
}
const updateOgp = (text, image) => {
  if (text !== appName) {
    document.title = `${appName} - ${text}`
    const ogTitle = document.querySelector('[property="og:title"]')
    ogTitle.setAttribute('content', `${appName} - ${text}`)
    const ogUrl = document.querySelector('[property="og:url"]')
    ogUrl.setAttribute('content', location.href)
    const ogImage = document.querySelector('[property="og:image"]')
    ogImage.setAttribute('content', image)
  }
}
main()
    </script>
  </body>
</html>
